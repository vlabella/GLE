#
# -- create a release - run manually to create a release
#
name: Create Release
on:
  workflow_dispatch:
  #pull_request:
  #push:
  #  branches: [main]
jobs:
  build:
    name: Create Release
    runs-on: ubunut-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v4
    - name: Get Version number
       #run: echo "VERSION=
       run: awk 'tolower($)) ~ /project\([[:blank:]]*[[:alnum:]]+[[:blank:]]+version[[:blank:]]+[[:digit:]]+\.[[:digit:]]+\.[[:digit:]]+[[:blank:]]*\)/{print $4}' src/CmakeLists.txt
    - name: Create Release
      id: create_release
      uses: actions/create-release@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # This token is provided by Actions, you do not need to create your own token
        with:
          tag_name: v${{ $VERSION }}
          release_name: Release v${{ $VERSION }}
          body_path:  ${{github.workspace}}/doc/ChangeLog.txt
          draft: false
          prerelease: false
